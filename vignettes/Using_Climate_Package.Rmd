---
title: "Introduction to the ESM262ClimatePackage"
author: "Sofie McComb &  Margaux Sleckman"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using_Climate_Package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r, echo = FALSE, message = FALSE}
knitr::opts_chunk$set(collapse = T, comment = "#>")
options(tibble.print_min = 4L, tibble.print_max = 4L)
library(ESM262ClimatePackage)
```


The ESM262ClimatePackage was developed to perform introductory assessments of climate change impacts to inform climate change mitigation and adaptation strategies.

This document introduces you to the packages functions, and shows how they can be used with sample dataframes. This vignette can be called by using vignette("Using_Climate_Package").

There are two sample datasets included in the package:

1. clim
2. species


There are five functions included in the package:

1. PlotTempBySeason
2. CalculateMonthlyPrecip
3. Calculate_TempStressIndex
4. Compute_WaterRequirements
5. ComputeHeatingAC_Cost



##Sample Data: clim and species

To explore how the functions in the Using_Climate_Package work, we will be using two sample datasets: clim and species. 

1. clim = dataframe from the SB_LTER meterology station (http://sbc.lternet.edu/data/), that includes daily meterologic data for:
 + minimum temperature (degC)
 + maximum temperature (degC)
 + precipitation (mm/day)
 + water year
 + date (including date, month, year)

2. species = dataframe of species plant characterisitc information (https://plants.usda.gov/) including:
 + species identifier
 + scientific name
 + common name
 + drought tolerance capability (low, medium, high)
 + number of days species can tolerate high heat stress per year
 + minimum annual precipitation (mm) species can tolerate
 + maximum annual precipitation (mm) species can tolerate

More information for both datasets can be found by using help(clim) and help(species).

```{r}

library(ESM262ClimatePackage)

#Explore clim dataset
head(clim)

#Explore species dataset
head(species)

```


##Functions

###PlotTempBySeason(): Calculate and Plot Seasonal Temperatures
PlotTempBySeason() allows you to calculate and plot maximum and minimum temperature by season across the years. The only argument required is the climate dataset to be inputted, which must be in a similar format to the clim sample dataset shown above. The function will return a dataframe with the average maximum temperatue and minimimum temperature by season for each year. It will also return a plot of maximum and minimum temperature by season over the years given in the sample dataset, with maximum average in red and minimum average in blue.

For example, we can give the function the clim dataset, and call the specific outputs:

```{r}

source("../R/PlotTempBySeason.R")
results1<-PlotTempBySeason(clim)

#Call the dataframe of results
head(results1$ClimateDF)

```


####CalculateMonthlyPrecip(): Calculate Monthly Precipitation

CalculateMonthlyPrecip() transforms a climate dataset into a multidimentional array and calculates the average weekly weekly precipitation by month and by year, returning two dataframes with the solutions. The only argument required is the climate dataset to be inputted, which must be in a similar format to the clim sample dataset shown above.

For example, we can give the function the clim dataset:

```{r}

source("../R/CalculateMonthlyPrecip.R")
results2<-CalculateMonthlyPrecip(clim)

head(results2)

```

####Calculate_TempStressIndex(): Evaluate Species-specific Temperature Stress

Calculate_TempStressIndex() allows you to calculate temperature stress status for each individual species on the basis of air temperature values.The function requires two arguments: a climate dataset and species dataset to be inputted, in similar format to the clim and species dataframes shown above. The function will return a dataframe that gives the number of high temperature stress days that year and species temperature stress status by year. Species temperature stress status options are yes (species is temperature stressed that year) or no (species is not temperature stressed that year). 

For example, we can give the function the clim and species dataset:

```{r}

source("../R/Calculate_TempStressIndex.R")
results3<-Calculate_TempStressIndex(clim, species)
head(results3)

```

####Compute_WaterRequirements(): Compute Species Annual Water Status

Compute_WaterRequirements() allows you to to compute water requirement status for different species on the basis of species minimum and maximum precipitation characteristics. The function requires two arguments: a climate dataset and species dataset to be inputted, in similar format to the clim and species dataframes shown above. The function will return a dataframe of annual precipitation levels (mm) and species annual water requirement status. Status results include insufficient (low water availability for the species annual water requirements), adequate, or saturated.

For example, we can give the function the clim and species dataset:

```{r}

source("../R/Compute_WaterRequirements.R")
results4<-Compute_WaterRequirements(clim, species)
head(results4)

```

####ComputeHeatingAC_Cost(): Heating and Cooling Cost Function

PlotTempBySeason() allows you to input climate data with daily minimum and maximum temperatures and return the daily cost of air conditioning and heating. The function requires four arguments: a climate dataset (similar to clim above), the dollar price of heating per degree Celsius, the dollar price of cooling per degree Celsius, and whether or not the user wants an interactive plot outputted.
The function will return a dataframe of date, month, year, and the cost of heating and cooling for that day. If the interactive plot is selected, than a plot of costs of heating and cooling across months will be displayed.

For example, we can give the function the four arguments, including the clim dataset:

```{r}

source("../R/ComputeHeatingAC_Cost.R")
results5<-ComputeHeatingAC_Cost(clim, price_heating_per_degree = 0.8, price_cooling_per_degree = 0.8,
                      interactive_plot_selection = F)
head(results5)


```
